# Telegram Mini App - Бронювання Фото Сесій

Цей репозиторій містить Telegram Mini App, розроблений за допомогою FastAPI, React та aiogram, що забезпечує можливість бронювання фотосесій через веб-додаток та інтерфейс Telegram-бота.

## Особливості
- **Форма бронювання**: Дозволяє користувачам бронювати фотосесії через веб-форму.
- **Повідомлення для адміністратора**: Повідомляє адміністраторів у Telegram про нове бронювання.
- **Адміністративна панель**: Надає адміністраторам можливість переглядати, затверджувати або видаляти бронювання.

## Структура проекту
- **API**: Побудований з використанням FastAPI, обробляє бекенд-операції для бронювання та надсилання повідомлень.
- **Telegram Bot**: Створений за допомогою aiogram, забезпечує взаємодію користувачів через Telegram.
- **Фронтенд**: Розроблений за допомогою Next.js та React, надає зручний інтерфейс для бронювання.

## Встановлення та налаштування

### Вимоги
- Python 3.8+
- Node.js 14+
- ngrok (для публікації локального сервера в інтернет)

### Крок 1: Клонування репозиторію

```bash
git clone <repository-url>
cd <repository-name>
```
Крок 2: Налаштування бекенду
Встановіть залежності:

```bash
pip install -r requirements.txt
```
Конфігурація бази даних: Додаток використовує SQLite. База даних автоматично ініціалізується, а таблиці створюються під час запуску програми.

Налаштування змінних середовища: Оновіть config.py, додавши токен вашого Telegram-бота та ID адміністраторів:

python
```bash
API_TOKEN = 'YOUR_TELEGRAM_BOT_TOKEN'
ADMIN_IDS = [123456789, 987654321]  # Замініть на фактичні ID користувачів Telegram
WEBAPP_URL = "https://your-ngrok-url.ngrok.io"  # Замініть на ваш URL від ngrok
```
Запуск API: Запустіть сервер FastAPI за допомогою uvicorn:

```bash
uvicorn api:app --host 0.0.0.0 --port 8000 --reload
```
Запустіть ngrok для публікації сервера:

```bash
ngrok http 8000
```
Крок 3: Налаштування фронтенду
Встановіть залежності фронтенду:


```bash
cd client
npm install
```
Запуск фронтенду:

```bash
npm run dev
```
Крок 4: Запуск Telegram-бота
Запустіть скрипт для забезпечення взаємодії з Telegram:

```bash
python main.py
```
Використання
Бронювання сесії
Користувачі можуть взаємодіяти з ботом для початку процесу бронювання. Бот надішле веб-посилання на форму, де користувачі можуть вказати свої дані, включаючи ім'я, електронну адресу, телефон і бажану дату проведення сесії.

Дії адміністратора
Адміністратори можуть:

Переглядати всі заброньовані сесії
Отримувати повідомлення про нові бронювання
Видаляти або оновлювати записи бронювань за необхідності
Деталі конфігурації
Бекенд-фреймворк: FastAPI обробляє всі бекенд-логіку та API-ендпоінти.
Фронтенд-фреймворк: Next.js та React забезпечують динамічний інтерфейс користувача.
База даних: SQLite налаштована для швидкого запуску, але її можна замінити на іншу базу даних.
Логіка бота: aiogram обробляє команди Telegram та взаємодію з сесіями.
Логування
Всі події додатка, включаючи помилки, логуються за допомогою модуля logging в Python.

Приклади команд
/start - Користувачі ініціюють бота.
/book_session - Відкриває інтерфейс бронювання.
/admin - Адміністративне меню для управління бронюваннями (доступно лише для ADMIN_IDS).
Примітки щодо розгортання
Цей додаток наразі налаштований для локальної розробки та опублікований через ngrok. Для продакшену рекомендується використовувати захищений, постійний хостинг замість ngrok для стабільного доступу в інтернет.
